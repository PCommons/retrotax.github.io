!function(){if(Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var e=0,t=this.length;t>e;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])},"undefined"!=typeof window._retrotax_options)var e=window._retrotax_options;"undefined"==typeof e&&(e={}),"undefined"==typeof e.iframe_base_path&&(e.iframe_base_path="https://cdn.retrotax-aci.com/dist/widget/iframe"),"undefined"==typeof e.username&&(e.username=!1),"undefined"==typeof e.apikey&&(e.apikey=!1),"undefined"==typeof e.clientid&&(e.clientid=!1),"undefined"==typeof e.companyid&&(e.companyid=!1),"undefined"==typeof e.locationid&&(e.locationid=!1),"undefined"==typeof e.animation&&(e.animation="modal"),"undefined"==typeof e.framework&&(e.framework="bootstrap"),"undefined"==typeof e.delay&&(e.delay=0),"undefined"==typeof e.debug&&(e.debug=!1),"undefined"==typeof e.queue_docs&&(e.queue_docs=!0),"undefined"==typeof e.hide_fields&&(e.hide_fields=!1),"undefined"==typeof e.hm_title&&(e.hm_title="Hiring Manager"),"undefined"==typeof e.hm_name&&(e.hm_name="Hiring Manager Name"),"undefined"==typeof e.selectedLanguage&&(e.selectedLanguage="en"),"undefined"==typeof e.hide_hm_section&&(e.hide_hm_section=!1),"undefined"==typeof e.readonly_fields&&(e.readonly_fields=!1),"undefined"==typeof e.prepopulate_by&&(e.prepopulate_by=!1),"undefined"!=typeof e.populated_fields&&e.prepopulate_by||(e.populated_fields={firstname:"",lastname:"",middleinitial:"",email:"",city:"",state:"",zip:"",address:"",address2:"",dob:""}),"undefined"==typeof e.plugin_type&&(e.plugin_type="demo"),"undefined"==typeof e.button_text&&(e.button_text="Open RetroTax Screening Plugin"),"undefined"==typeof e.button_text_error&&(e.button_text_error="Error - Something went wrong."),"undefined"==typeof e.button_class&&(e.button_class=""),"undefined"==typeof e.button_class_error&&(e.button_class_error=""),"undefined"==typeof e.logo&&(e.logo=!0),"undefined"==typeof e.callback_url&&(e.callback_url=!1),"undefined"==typeof e.hide_fields&&(e.hide_fields=!1),"undefined"==typeof e.whitelist_code&&(e.whitelist_code=!1),"undefined"!=typeof e.prequal&&e.prequal||(e.prequal={email_to:"",email_cc:"",partner_name:"",partner_organization:"",partner_website:"",closing_text:"",intro_text:"",logo_url:"",logo_width:"",logo_height:"",retrotax_contact:"",ask_ssn:!1}),e.w=Math.max(document.documentElement.clientWidth,window.innerWidth||0),e.h=Math.max(document.documentElement.clientHeight,window.innerHeight||0);var t={modal:{options:{modalAnimation:"modal",fastAnimation:!0},init:function(e){for(var t in e)this.options[t]=e[t];return this},reload:function(){var e=getElementById("_bftn_iframe");return e.style.display="none",this},start:function(){var t="#_bftn_iframe { position: fixed; left: 0px; top: 0px; 				width: 100%; height: 100%; z-index: 100001; }";n.injectCSS("_bftn_iframe_css",t);var o=n.createIframe(this.options.modalAnimation);if(this.options.prepopulate_by!==!1)switch(this.options.prepopulate_by){case"id":for(var i in e.populated_fields)if(e.populated_fields.hasOwnProperty(i)){var a=e.populated_fields[i];a&&(e.populated_fields[i]=null!=document.getElementById(a)?document.getElementById(a).value:"")}break;case"name":for(var i in e.populated_fields)if(e.populated_fields.hasOwnProperty(i)){var a=e.populated_fields[i];a&&(e.populated_fields[i]="undefined"!=document.getElementsByName(a)[0]?document.getElementsByName(a)[0].value:"")}}this.options.debug&&console.log("_retrotax_options being passed to IFRAME:"),this.options.debug&&console.log(this.options),n.bindIframeCommunicator(o,this)},stop:function(){n.destroyIframe()}}},n={lastFramework:"",lastIframe:{},injectCSS:function(e,t){var n=document.createElement("style");n.type="text/css",n.id=e,n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),document.head.appendChild(n)},createIframe:function(t){var o=document.getElementById("_bftn_iframe");if(n.lastFramework!=e.framework){void 0!=o&&o.parentNode.removeChild(o),n.lastFramework=e.framework;var i=document.createElement("iframe");return i.id="_bftn_iframe",i.src=e.iframe_base_path+"/"+e.framework+".html",i.frameBorder=0,i.allowTransparency=!0,i.style.display="none",document.body.appendChild(i),i}return o},destroyIframe:function(){var e=document.getElementById("_bftn_iframe");console.log(e),e.style.display="none";var t="#_bftn_iframe { position: fixed; left: -5000px; top: -5000px; 				width: 100%; height: 100%; z-index: 10001; }";n.injectCSS("_bftn_iframe_css",t)},sendMessage:function(e,t,n){t||(t={}),t.requestType=e,t.BFTN_WIDGET_MSG=!0,t.HOST_NAME=this.getHostname(),console.log("SEND MESSAGE"),console.log(n),t=JSON.stringify(t),n.contentWindow.postMessage(t,"*")},bindIframeCommunicator:function(e,t){this.lastIframe=e;var o=window.addEventListener?"addEventListener":"attachEvent",i=window[o],a="attachEvent"==o?"onmessage":"message";"oldIframe"==e.className&&(e.style.display="block",n.sendMessage("putAnimation",t.options,e)),i(a,function(o){if("object"!=typeof o.data)var i=JSON.parse(o.data);else var i=o.data;if(e=n.lastIframe,i&&i.BFTN_IFRAME_MSG)switch(delete i.BFTN_IFRAME_MSG,i.requestType){case"getAnimation":e.style.display="block",n.sendMessage("putAnimation",t.options,e);break;case"stop":e.className="oldIframe",t.stop()}},!1)},getHostname:function(){var e=window.location.host.replace("www.","");return e},log:function(){e.debug&&console.log.apply(console,arguments)}},o=function(){if(!e.apikey||!e.username||32!=e.apikey.length||""==e.username){e.debug&&console.log("Username or API Key Provided are empty, not provided, or not equal to 32 chars (apikey)");var n=document.getElementById("retrotax_plugin_trigger");return n.setAttribute("class",e.button_class_error),n.innerHTML=e.button_text_error,!1}var o=t[e.animation];setTimeout(function(){o.init(e).start()},e.delay)},i=function(){var t=document.getElementById("retrotax_plugin");if("undefined"!=typeof t&&null!=t){var n=!0;if(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var i=new Number(RegExp.$1);i>=35?e.debug&&console.log("You're using FF 35 or above"):i>=5?e.debug&&console.log("You're using FF 5.x or above"):i>=4?e.debug&&console.log("You're using FF 4.x or above"):i>=3?e.debug&&console.log("You're using FF 3.x or above"):i>=2?e.debug&&console.log("You're using FF 2.x"):i>=1&&e.debug&&console.log("You're using FF 1.x")}if(-1!=navigator.userAgent.indexOf("MSIE"))var a=/MSIE (\d+\.\d+);/;else var a=/Trident.*rv[ :]*(\d+\.\d+)/;if(a.test(navigator.userAgent)){var r=new Number(RegExp.$1);r>=12?e.debug&&console.log("You're using IE12 or above"):r>=11?e.debug&&console.log("You're using IE11 or above"):r>=10?e.debug&&console.log("You're using IE10 or above"):r>=9?e.debug&&console.log("You're using IE9 or above"):n=!1}e.debug&&console.log("Compatible Browser: "+n);var d=document.getElementById("retrotax_plugin");if(n){if(null!=document.getElementById("head_color")){var l=document.getElementById("head_color");l.addEventListener("change",function(){console.log(l.value),e.head_color=l.value})}if(null!=document.getElementById("panel_color")){var s=document.getElementById("panel_color");s.addEventListener("change",function(){console.log(s.value),e.panel_color=s.value})}if(null!=document.getElementById("text_color")){var u=document.getElementById("text_color");u.addEventListener("change",function(){console.log(u.value),e.text_color=u.value})}if(null!=document.getElementById("error_color")){var c=document.getElementById("error_color");c.addEventListener("change",function(){console.log(c.value),e.error_color=c.value})}if(null!=document.getElementById("inputWidth")){var f=document.getElementById("inputWidth");f.addEventListener("change",function(){e.inputWidth=f.value,console.log("Input changed"+f.value)})}if(null!=document.getElementById("retrotax_plugin_trigger")){var p=document.getElementById("retrotax_plugin_trigger");p.addEventListener("click",function(e){e.preventDefault(),o()},!1)}else{var m=document.createElement("button");m.id="retrotax_plugin_trigger",m.setAttribute("class",e.button_class),m.innerHTML=e.button_text,m.addEventListener("click",function(e){e.preventDefault(),o()},!1),d.appendChild(m)}}else{if(null!=document.getElementById("retrotax_plugin_trigger")){var g=document.getElementById("retrotax_plugin_trigger");g["delete"]()}var _=document.createElement("a");_.id="retrotax_plugin_trigger",_.setAttribute("target","_blank"),_.setAttribute("class",e.button_class),_.innerHTML=e.button_text,_.setAttribute("href","https://webscreen.retrotax-aci.com/users/authenticateh?u="+e.username+"&h="+e.apikey),d.appendChild(_)}}};document.addEventListener("DOMContentLoaded",function(e){i()})}();